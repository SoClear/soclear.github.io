# å¸¸è§ç¼–ç¨‹æ¦‚å¿µ

## å˜é‡å’Œå¯å˜æ€§

### ä¸å¯å˜å˜é‡

```rust
fn main() {
    let x = 5;
    println!("The value of x is: {x}");
    // ä¸‹æ–¹æŠ¥é”™ï¼Œå› ä¸ºxæ˜¯ä¸å¯å˜å˜é‡
    x = 6;
    println!("The value of x is: {x}");
}
```

### å¯å˜å˜é‡

```rust
fn main() {
    let mut x = 5;
    println!("The value of x is: {x}");
    // xæ˜¯å¯å˜å˜é‡ï¼Œæ‰€ä»¥å¯ä»¥å†æ¬¡èµ‹å€¼
    x = 6;
    println!("The value of x is: {x}");
}
```

### å¸¸é‡

```rust
// å…¨å¤§å†™åŠ ä¸‹åˆ’çº¿
const THREE_HOURS_IN_SECONDS: u32 = 60 * 60 * 3;
```

### éšè—

æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸ä¹‹å‰å˜é‡åŒåçš„æ–°å˜é‡ã€‚
ç§°ä¹‹ä¸ºç¬¬ä¸€ä¸ªå˜é‡è¢«ç¬¬äºŒä¸ª éšè—ï¼ˆShadowingï¼‰ äº†ï¼Œ
è¿™æ„å‘³ç€å½“æ‚¨ä½¿ç”¨å˜é‡çš„åç§°æ—¶ï¼Œç¼–è¯‘å™¨å°†çœ‹åˆ°ç¬¬äºŒä¸ªå˜é‡ã€‚
å®é™…ä¸Šï¼Œç¬¬äºŒä¸ªå˜é‡â€œé®è”½â€äº†ç¬¬ä¸€ä¸ªå˜é‡ï¼Œ
æ­¤æ—¶ä»»ä½•ä½¿ç”¨è¯¥å˜é‡åçš„è¡Œä¸ºä¸­éƒ½ä¼šè§†ä¸ºæ˜¯åœ¨ä½¿ç”¨ç¬¬äºŒä¸ªå˜é‡ï¼Œ
ç›´åˆ°ç¬¬äºŒä¸ªå˜é‡è‡ªå·±ä¹Ÿè¢«éšè—æˆ–ç¬¬äºŒä¸ªå˜é‡çš„ä½œç”¨åŸŸç»“æŸã€‚
å¯ä»¥ç”¨ç›¸åŒå˜é‡åç§°æ¥éšè—ä¸€ä¸ªå˜é‡ï¼Œä»¥åŠé‡å¤ä½¿ç”¨ let å…³é”®å­—æ¥å¤šæ¬¡éšè—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
fn main() {
    let x = 5;

    let x = x + 1;

    {
        let x = x * 2;
        println!("The value of x in the inner scope is: {x}");
    }

    println!("The value of x is: {x}");
}
```

éšè—ä¸å°†å˜é‡æ ‡è®°ä¸º `mut` æ˜¯æœ‰åŒºåˆ«çš„ã€‚å½“ä¸å°å¿ƒå°è¯•å¯¹å˜é‡é‡æ–°èµ‹å€¼æ—¶ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ `let` å…³é”®å­—ï¼Œå°±ä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚
é€šè¿‡ä½¿ç”¨ `let`ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªå€¼è¿›è¡Œä¸€äº›è®¡ç®—ï¼Œä¸è¿‡è®¡ç®—å®Œä¹‹åå˜é‡ä»ç„¶æ˜¯ä¸å¯å˜çš„ã€‚
`mut` ä¸éšè—çš„å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå½“å†æ¬¡ä½¿ç”¨ `let` æ—¶ï¼Œå®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜å€¼çš„ç±»å‹ï¼Œå¹¶ä¸”å¤ç”¨è¿™ä¸ªåå­—ã€‚

## æ•°æ®ç±»å‹

### æ ‡é‡

æ ‡é‡ç±»å‹ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„å€¼ã€‚
Rust æœ‰å››ç§åŸºæœ¬çš„æ ‡é‡ç±»å‹ï¼šæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”ç±»å‹å’Œå­—ç¬¦ç±»å‹ã€‚

## æ•´å‹

### Rust ä¸­çš„æ•´å‹

| é•¿åº¦      | æœ‰ç¬¦å·     | æ— ç¬¦å·     |
|---------|---------|---------|
| 8-bit   | `i8`    | `u8`    |
| 16-bit  | `i16`   | `u16`   |
| 32-bit  | `i32`   | `u32`   |
| 64-bit  | `i64`   | `u64`   |
| 128-bit | `i128`  | `u128`  |
| arch    | `isize` | `usize` |

å¦å¤–ï¼Œisize å’Œ usize ç±»å‹ä¾èµ–è¿è¡Œç¨‹åºçš„è®¡ç®—æœºæ¶æ„ï¼š64 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 64 ä½çš„ï¼Œ 32 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 32 ä½çš„ã€‚

### Rust ä¸­çš„æ•´å‹å­—é¢å€¼

| æ•°å­—å­—é¢å€¼                 | ä¾‹å­            |
|-----------------------|---------------|
| Decimal (åè¿›åˆ¶)         | `98_222`      |
| Hex (åå…­è¿›åˆ¶)            | `0xff`        |
| Octal (å…«è¿›åˆ¶)           | `0o77`        |
| Binary (äºŒè¿›åˆ¶)          | `0b1111_0000` |
| Byte (å•å­—èŠ‚å­—ç¬¦)(ä»…é™äº`u8`) | `b'A'`        |

### æ•´å‹æº¢å‡º

æ¯”æ–¹è¯´æœ‰ä¸€ä¸ª `u8` ï¼Œå®ƒå¯ä»¥å­˜æ”¾ä»é›¶åˆ° `255` çš„å€¼ã€‚é‚£ä¹ˆå½“ä½ å°†å…¶ä¿®æ”¹ä¸º `256` æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿè¿™è¢«ç§°ä¸º â€œæ•´å‹æº¢å‡ºâ€ï¼ˆâ€œinteger
overflowâ€ ï¼‰ï¼Œè¿™ä¼šå¯¼è‡´ä»¥ä¸‹ä¸¤ç§è¡Œä¸ºä¹‹ä¸€çš„å‘ç”Ÿã€‚å½“åœ¨ debug æ¨¡å¼ç¼–è¯‘æ—¶ï¼ŒRust æ£€æŸ¥è¿™ç±»é—®é¢˜å¹¶ä½¿ç¨‹åº _panic_ï¼Œè¿™ä¸ªæœ¯è¯­è¢« Rust
ç”¨æ¥è¡¨æ˜ç¨‹åºå› é”™è¯¯è€Œé€€å‡ºã€‚
éƒ¨åˆ†ä¼šè¯¦ç»†ä»‹ç» panicã€‚

åœ¨ release æ„å»ºä¸­ï¼ŒRust ä¸æ£€æµ‹æº¢å‡ºï¼Œç›¸åä¼šè¿›è¡Œä¸€ç§è¢«ç§°ä¸ºäºŒè¿›åˆ¶è¡¥ç å›ç»•ï¼ˆ_twoâ€™s complement wrapping_
ï¼‰çš„æ“ä½œã€‚ç®€è€Œè¨€ä¹‹ï¼Œæ¯”æ­¤ç±»å‹èƒ½å®¹çº³æœ€å¤§å€¼è¿˜å¤§çš„å€¼ä¼šå›ç»•åˆ°æœ€å°å€¼ï¼Œå€¼ `256` å˜æˆ `0`ï¼Œå€¼ `257` å˜æˆ `1`
ï¼Œä¾æ­¤ç±»æ¨ã€‚ä¾èµ–æ•´å‹å›ç»•è¢«è®¤ä¸ºæ˜¯ä¸€ç§é”™è¯¯ï¼Œå³ä¾¿å¯èƒ½å‡ºç°è¿™ç§è¡Œä¸ºã€‚å¦‚æœä½ ç¡®å®éœ€è¦è¿™ç§è¡Œä¸ºï¼Œæ ‡å‡†åº“ä¸­æœ‰ä¸€ä¸ªç±»å‹æ˜¾å¼æä¾›æ­¤åŠŸèƒ½ï¼Œ[`Wrapping`](https://doc.rust-lang.org/std/num/struct.Wrapping.html)ã€‚
ä¸ºäº†æ˜¾å¼åœ°å¤„ç†æº¢å‡ºçš„å¯èƒ½æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨æ ‡å‡†åº“åœ¨åŸç”Ÿæ•°å€¼ç±»å‹ä¸Šæä¾›çš„ä»¥ä¸‹æ–¹æ³•:

- æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ `wrapping_*` æ–¹æ³•è¿›è¡Œå›ç»•ï¼Œå¦‚ `wrapping_add`
- å¦‚æœ `checked_*` æ–¹æ³•å‡ºç°æº¢å‡ºï¼Œåˆ™è¿”å› `None`å€¼
- ç”¨ `overflowing_*` æ–¹æ³•è¿”å›å€¼å’Œä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å‡ºç°æº¢å‡º
- ç”¨ `saturating_*` æ–¹æ³•åœ¨å€¼çš„æœ€å°å€¼æˆ–æœ€å¤§å€¼å¤„è¿›è¡Œé¥±å’Œå¤„ç†

### æµ®ç‚¹å‹

```rust
fn main() {
    let x = 2.0; // f64

    let y: f32 = 3.0; // f32
}
```

### æ•°å€¼è¿ç®—

```rust
fn main() {
    // addition
    let sum = 5 + 10;

    // subtraction
    let difference = 95.5 - 4.3;

    // multiplication
    let product = 4 * 30;

    // division
    let quotient = 56.7 / 32.2;
    let floored = 2 / 3; // Results in 0

    // remainder
    let remainder = 43 % 5;
}
```

### å¸ƒå°”å‹

```rust
fn main() {
    let t = true;

    let f: bool = false; // with explicit type annotation
}
```

### å­—ç¬¦ç±»å‹

Rustçš„ `char` ç±»å‹æ˜¯è¯­è¨€ä¸­æœ€åŸç”Ÿçš„å­—æ¯ç±»å‹ã€‚ä¸‹é¢æ˜¯ä¸€äº›å£°æ˜ `char` å€¼çš„ä¾‹å­ï¼š

```rust
fn main() {
    let c = 'z';
    let z: char = 'â„¤'; // with explicit type annotation
    let heart_eyed_cat = 'ğŸ˜»';
}
```

æ³¨æ„ï¼Œæˆ‘ä»¬ç”¨å•å¼•å·å£°æ˜ `char` å­—é¢é‡ï¼Œè€Œä¸ä¹‹ç›¸åçš„æ˜¯ï¼Œä½¿ç”¨åŒå¼•å·å£°æ˜å­—ç¬¦ä¸²å­—é¢é‡ã€‚  
Rust çš„ `char` ç±»å‹çš„å¤§å°ä¸ºå››ä¸ªå­—èŠ‚(four bytes)ï¼Œå¹¶ä»£è¡¨äº†ä¸€ä¸ª Unicode æ ‡é‡å€¼ï¼ˆUnicode Scalar Valueï¼‰ï¼Œ
è¿™æ„å‘³ç€å®ƒå¯ä»¥æ¯” ASCII è¡¨ç¤ºæ›´å¤šå†…å®¹ã€‚  
åœ¨ Rust ä¸­ï¼Œå¸¦å˜éŸ³ç¬¦å·çš„å­—æ¯ï¼ˆAccented lettersï¼‰ï¼Œä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰å­—ç¬¦ï¼Œemojiï¼ˆç»˜æ–‡å­—ï¼‰ä»¥åŠé›¶é•¿åº¦çš„ç©ºç™½å­—ç¬¦éƒ½æ˜¯æœ‰æ•ˆçš„ `char`
å€¼ã€‚  
Unicode æ ‡é‡å€¼åŒ…å«ä» `U+0000` åˆ° `U+D7FF` å’Œ `U+E000` åˆ° `U+10FFFF` åœ¨å†…çš„å€¼ã€‚  
ä¸è¿‡ï¼Œâ€œå­—ç¬¦â€ å¹¶ä¸æ˜¯ä¸€ä¸ª Unicode ä¸­çš„æ¦‚å¿µï¼Œæ‰€ä»¥äººç›´è§‰ä¸Šçš„ â€œå­—ç¬¦â€ å¯èƒ½ä¸ Rust ä¸­çš„ `char` å¹¶ä¸ç¬¦åˆã€‚

## å¤åˆç±»å‹

å¤åˆç±»å‹ï¼ˆCompound typesï¼‰å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ã€‚Rust æœ‰ä¸¤ä¸ªåŸç”Ÿçš„å¤åˆç±»å‹ï¼šå…ƒç»„ï¼ˆtupleï¼‰å’Œæ•°ç»„ï¼ˆarrayï¼‰ã€‚

### å…ƒç»„

```rust
fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);

    let (x, y, z) = tup;

    println!("The value of y is: {y}");

    let five_hundred = x.0;

    let six_point_four = x.1;

    let one = x.2;
}
```

ä¸å¸¦ä»»ä½•å€¼çš„å…ƒç»„æœ‰ä¸ªç‰¹æ®Šçš„åç§°ï¼Œå«åš å•å…ƒï¼ˆunitï¼‰ å…ƒç»„ã€‚è¿™ç§å€¼ä»¥åŠå¯¹åº”çš„ç±»å‹éƒ½å†™ä½œ ()ï¼Œè¡¨ç¤ºç©ºå€¼æˆ–ç©ºçš„è¿”å›ç±»å‹ã€‚å¦‚æœè¡¨è¾¾å¼ä¸è¿”å›ä»»ä½•å…¶ä»–å€¼ï¼Œåˆ™ä¼šéšå¼è¿”å›å•å…ƒå€¼ã€‚

### æ•°ç»„

Rustä¸­çš„æ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„

å¯ä»¥åƒè¿™æ ·ç¼–å†™æ•°ç»„çš„ç±»å‹ï¼šåœ¨æ–¹æ‹¬å·ä¸­åŒ…å«æ¯ä¸ªå…ƒç´ çš„ç±»å‹ï¼Œåè·Ÿåˆ†å·ï¼Œå†åè·Ÿæ•°ç»„å…ƒç´ çš„æ•°é‡ã€‚

```rust
fn main() {
    let a: [i32; 5] = [1, 2, 3, 4, 5];
}
```

ä½ è¿˜å¯ä»¥é€šè¿‡åœ¨æ–¹æ‹¬å·ä¸­æŒ‡å®šåˆå§‹å€¼åŠ åˆ†å·å†åŠ å…ƒç´ ä¸ªæ•°çš„æ–¹å¼æ¥åˆ›å»ºä¸€ä¸ªæ¯ä¸ªå…ƒç´ éƒ½ä¸ºç›¸åŒå€¼çš„æ•°ç»„ï¼š

```rust
fn main() {
    let a = [3; 5];
}
```

è®¿é—®æ•°ç»„å…ƒç´ :

```rust
fn main() {
    let a = [1, 2, 3, 4, 5];

    let first = a[0];
    let second = a[1];
}
```

## å‡½æ•°

Rust ä»£ç ä¸­çš„å‡½æ•°å’Œå˜é‡åä½¿ç”¨ snake case è§„èŒƒé£æ ¼ã€‚åœ¨ snake case ä¸­ï¼Œæ‰€æœ‰å­—æ¯éƒ½æ˜¯å°å†™å¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚

```rust
fn main() {
    print_labeled_measurement(5, 'h');
}

fn print_labeled_measurement(value: i32, unit_label: char) {
    println!("The measurement is: {value}{unit_label}");
}
```

### è¯­å¥å’Œè¡¨è¾¾å¼

**è¯­å¥**ï¼ˆ_Statements_ï¼‰æ˜¯æ‰§è¡Œä¸€äº›æ“ä½œä½†ä¸è¿”å›å€¼çš„æŒ‡ä»¤ã€‚è¡¨è¾¾å¼ï¼ˆ_Expressions_ï¼‰è®¡ç®—å¹¶äº§ç”Ÿä¸€ä¸ªå€¼ã€‚

```rust
fn main() {
    // ç­‰å·åé¢çš„å¤§æ‹¬å·æ˜¯ä»£ç å—
    let y = {
        let x = 3;
        // ä¸‹é¢è¿™è¡Œæœ€åæ²¡æœ‰å†™åˆ†å·ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼
        x + 1
    };

    println!("The value of y is: {y}");
}
```

### å…·æœ‰è¿”å›å€¼çš„å‡½æ•°

```rust
fn main() {
    let x = plus_one(5);

    println!("The value of x is: {x}");
}

fn plus_one(x: i32) -> i32 {
    // æ³¨æ„æœ€åæ²¡æœ‰å†™åˆ†å·ï¼Œè¡¨æ˜è¿™æ˜¯è¿”å›å€¼ï¼ŒåŠ äº†åˆ†å·å°±æŠ¥é”™
    x + 1
}
```

## æ§åˆ¶æµ

```rust
fn main() {
    let number = 6;

    if number % 4 == 0 {
        println!("number is divisible by 4");
    } else if number % 3 == 0 {
        println!("number is divisible by 3");
    } else if number % 2 == 0 {
        println!("number is divisible by 2");
    } else {
        println!("number is not divisible by 4, 3, or 2");
    }
}
```

### ifè¡¨è¾¾å¼

if å’Œ else åˆ†æ”¯çš„å€¼ç±»å‹å¿…é¡»ç›¸å®¹

```rust
fn main() {
    let condition = true;
    let number = if condition { 5 } else { 6 };

    println!("The value of number is: {number}");
}
```

### å¾ªç¯

Rust æœ‰ä¸‰ç§å¾ªç¯ï¼šloopã€while å’Œ forã€‚

loop:

```rust
fn main() {
    let mut counter = 0;

    let result = loop {
        counter += 1;

        if counter == 10 {
            // break è¡¨è¾¾å¼ï¼Œå®ƒåœæ­¢å¾ªç¯å¹¶è¿”å›åé¢çš„å€¼
            break counter * 2;
        }
    };

    println!("The result is {result}");
}
```

å¾ªç¯æ ‡ç­¾ï¼š

```rust
fn main() {
    let mut count = 0;
    'counting_up: loop {
        println!("count = {count}");
        let mut remaining = 10;

        loop {
            println!("remaining = {remaining}");
            if remaining == 9 {
                break;
            }
            if count == 2 {
                break 'counting_up;
            }
            remaining -= 1;
        }

        count += 1;
    }
    println!("End count = {count}");
}
```

while:

```rust
fn main() {
    let mut number = 3;

    while number != 0 {
        println!("{number}!");

        number -= 1;
    }

    println!("LIFTOFF!!!");
}
```

for:

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];
    let mut index = 0;

    while index < 5 {
        println!("the value is: {}", a[index]);

        index += 1;
    }
}
```

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];

    for element in a {
        println!("the value is: {element}");
    }
}
```

```rust
fn main() {
    for number in (1..4).rev() {
        println!("{number}!");
    }
    println!("LIFTOFF!!!");
}
```